@layer theme, base, antd, components, utilities;

@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/preflight.css' layer(base);
@import 'tailwindcss/utilities.css' layer(utilities);

@plugin "./../../plugins/tailwind-color";
@plugin "./../../plugins/tailwind-scrollbar";
@custom-variant dark (&:where(.dark, .dark *));

@layer base {
  @font-face {
    font-family: 'Poppins';
    src: url('/fonts/poppins/Poppins-Regular.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('/fonts/poppins/Poppins-SemiBold.ttf') format('truetype');
    font-weight: 600;
    font-style: normal;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('/fonts/poppins/Poppins-Bold.ttf') format('truetype');
    font-weight: 700;
    font-style: normal;
  }

  body {
    @apply relative font-['Poppins']! before:after:content-[''] bg-white dark:bg-black/90;
    /* Before */
    @apply before:absolute before:inset-0 before:-z-90 before:[clip-path:circle(30%_at_right_70%)];
    @apply before:to-app-500/10 before:bg-linear-to-b before:from-transparent dark:before:from-black dark:before:to-black;
    /* After */
    @apply after:absolute after:inset-0 after:top-[50px] after:-z-90 after:[clip-path:circle(20%_at_10%_10%)];
    @apply after:from-app-500/10 after:bg-linear-to-b after:to-transparent dark:after:from-black;
  }
  * {
    @apply scrollbar:size-1 scrollbar-track:bg-app-500/20 scrollbar-thumb:bg-app-500 dark:scrollbar-thumb:bg-black dark:scrollbar-track:bg-black;
  }
}
@layer components {
  .flex-center {
    @apply flex items-center justify-center;
  }
  .flex-col-center {
    @apply flex items-center justify-center flex-col;
  }
  .ant-form-item:last-of-type {
    @apply mb-0;
  }
  .underline {
    @apply hover:text-app-500 decoration-app-500 dark:decoration-app-400 dark:hover:decoration-app-500 dark:focus:ring-app-400/40 rounded-sm underline decoration-2 underline-offset-2 transition duration-100;
  }
  .ant-app {
    @apply flex h-[inherit] flex-col;
  }
  .glass {
    @apply w-full rounded-lg bg-linear-to-r from-app-500/50 to-black/50 p-6 shadow-md backdrop-blur-md;
  }
  .preview-area * {
    @apply transition-all duration-200 ease-in-out;
  }
  .hover-scale {
    @apply relative grid w-12 h-12 grid-cols-3 p-1 border border-gray-200 rounded-lg place-content-around place-items-center aspect-square shadow transition-all duration-200 ease-in-out hover:scale-[1.4] bg-white dark:bg-black dark:border-white/20;
  }
  .stack {
    @apply grid;
  }

  .stack > * {
    @apply col-start-1 row-start-1 w-full h-full z-1 min-h-[30px];
    transform: translateY(-16%) scale(0.8);
  }
  .stack > :first-child {
    @apply z-3;
    transform: translateY(0);
  }
  .stack > :nth-child(2) {
    @apply z-2;
    transform: translateY(-8%) scale(0.9);
  }
  .stack > :nth-child(3) {
    @apply z-1;
    transform: translateY(-24%) scale(0.7);
  }

  .animate-spark {
    /* 0.8s spark + 1s pause = 1.8s total */
    animation: spark 1.8s ease-out infinite;
  }

  .animate-spark-fast {
    /* 0.5s spark + 1s pause = 1.5s total */
    animation: spark-fast 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }
  .animate-wheel-normal {
    animation: wheel-rotate 2s linear infinite;
  }
  .animate-wheel-fast {
    animation: wheel-rotate 1s linear infinite;
  }
  .animate-wheel-slow {
    animation: wheel-rotate 4s linear infinite;
  }
  .resize-handle {
    @apply absolute w-3 h-3 bg-white border-2 border-app-500 rounded-full;
  }
  .add-border {
    @apply border border-gray-200 rounded-md p-2;
  }
  .lined-border {
    background: 
    /* Top edge - vertical dashes */
      repeating-linear-gradient(to right, transparent 0px, transparent 5px, #000000 5px, #000000 6px, transparent 6px, transparent 15px) top / 100% 5px no-repeat,
      /* Bottom edge - vertical dashes */ repeating-linear-gradient(to right, transparent 0px, transparent 5px, #000000 5px, #000000 6px, transparent 6px, transparent 15px) bottom / 100% 5px no-repeat,
      /* Left edge - horizontal dashes */ repeating-linear-gradient(to bottom, transparent 0px, transparent 5px, #000000 5px, #000000 6px, transparent 6px, transparent 15px) left / 5px 100% no-repeat,
      /* Right edge - horizontal dashes */ repeating-linear-gradient(to bottom, transparent 0px, transparent 5px, #000000 5px, #000000 6px, transparent 6px, transparent 15px) right / 5px 100%
        no-repeat,
      /* Main background */ #e5e7eb;
  }
  .lined-border-dark {
    background: 
    /* Top edge - vertical dashes */
      repeating-linear-gradient(to right, transparent 0px, transparent 5px, #e5e7eb 5px, #e5e7eb 6px, transparent 6px, transparent 15px) top / 100% 5px no-repeat,
      /* Bottom edge - vertical dashes */ repeating-linear-gradient(to right, transparent 0px, transparent 5px, #e5e7eb 5px, #e5e7eb 6px, transparent 6px, transparent 15px) bottom / 100% 5px no-repeat,
      /* Left edge - horizontal dashes */ repeating-linear-gradient(to bottom, transparent 0px, transparent 5px, #e5e7eb 5px, #e5e7eb 6px, transparent 6px, transparent 15px) left / 5px 100% no-repeat,
      /* Right edge - horizontal dashes */ repeating-linear-gradient(to bottom, transparent 0px, transparent 5px, #e5e7eb 5px, #e5e7eb 6px, transparent 6px, transparent 15px) right / 5px 100%
        no-repeat,
      /* Main background */ #000000;
  }
}

@layer utilities {
  @keyframes spark {
    /* spark happens here */
    0% {
      opacity: 0;
      transform: scale(0.6);
    }

    15% {
      opacity: 1;
      transform: scale(1.1);
    }

    40% {
      opacity: 0.8;
      transform: scale(1);
    }

    /* pause zone */
    60%,
    100% {
      opacity: 0;
      transform: scale(0.8);
    }
  }

  @keyframes spark-fast {
    /* spark */
    0% {
      opacity: 0;
      transform: scale(0.5);
    }

    20% {
      opacity: 1;
      transform: scale(1.15);
    }

    50% {
      opacity: 0.6;
    }

    /* pause */
    65%,
    100% {
      opacity: 0;
      transform: scale(0.7);
    }
  }
  @keyframes wheel-rotate {
    0% {
      transform: rotate(0deg);
    }
    80% {
      transform: rotate(360deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
}

@media (prefers-reduced-motion: reduce) {
  .animate-spark,
  .animate-spark-fast,
  .animate-wheel-normal,
  .animate-wheel-slow,
  .animate-wheel-fast {
    animation: none;
  }
}
